[gd_scene load_steps=17 format=3 uid="uid://b3iccjuodukry"]

[ext_resource type="Script" path="res://scripts/main.gd" id="1"]
[ext_resource type="Script" path="res://scripts/player.gd" id="2"]
[ext_resource type="Script" path="res://scripts/build_manager.gd" id="3"]
[ext_resource type="Script" path="res://scripts/ui.gd" id="4"]
[ext_resource type="PackedScene" path="res://scenes/buildings/stronghold_core.tscn" id="5"]
[ext_resource type="Texture2D" uid="uid://bxhh6lfeqopiy" path="res://assets/ui/ui_panel_frame_small_256x128_v001.png" id="6"]
[ext_resource type="Texture2D" uid="uid://chdf520aoaouq" path="res://assets/ui/ui_bar_xp_384x16_v001.png" id="7"]
[ext_resource type="Texture2D" uid="uid://bd6hunee4nvrb" path="res://assets/ui/ui_bar_xp_empty_384x16_v001.png" id="8"]
[ext_resource type="Texture2D" uid="uid://caf0i0ns76qm1" path="res://assets/ui/ui_icon_gold_32_v001.png" id="9"]
[ext_resource type="Script" path="res://scripts/directional_sprite.gd" id="11"]
[ext_resource type="Texture2D" uid="uid://burf07jpx6hws" path="res://assets/ui/ui_panel_frame_medium_384x192_v001.png" id="13"]
[ext_resource type="Texture2D" uid="uid://c7ackk6g8qa2u" path="res://assets/ui/ui_dialog_frame_384x224_v001.png" id="14"]
[ext_resource type="Script" path="res://scripts/ground.gd" id="15"]
[ext_resource type="Texture2D" uid="uid://dtvmyjiyni8w7" path="res://assets/ui/ui_bar_health_256x24_v001.png" id="21"]
[ext_resource type="Texture2D" uid="uid://c7060wefc781" path="res://assets/ui/ui_bar_health_empty_256x24_v001.png" id="22"]

[sub_resource type="CircleShape2D" id="1"]

[node name="Main" type="Node2D"]
script = ExtResource("1")

[node name="World" type="Node2D" parent="."]

[node name="Ground" type="TileMap" parent="World"]
z_index = -10
format = 2
script = ExtResource("15")
radius = 90

[node name="Player" type="CharacterBody2D" parent="World"]
position = Vector2(120, 0)
script = ExtResource("2")

[node name="Body" type="AnimatedSprite2D" parent="World/Player"]
script = ExtResource("11")

[node name="CollisionShape2D" type="CollisionShape2D" parent="World/Player"]
shape = SubResource("1")

[node name="Camera2D" type="Camera2D" parent="World/Player"]
zoom = Vector2(2, 2)

[node name="Enemies" type="Node2D" parent="World"]

[node name="Projectiles" type="Node2D" parent="World"]

[node name="FX" type="Node2D" parent="World"]

[node name="Buildings" type="Node2D" parent="World"]

[node name="StrongholdCore" parent="World/Buildings" instance=ExtResource("5")]

[node name="Props" type="Node2D" parent="World"]

[node name="Pickups" type="Node2D" parent="World"]

[node name="Breakables" type="Node2D" parent="World"]

[node name="BuildManager" type="Node" parent="."]
script = ExtResource("3")

[node name="UI" type="CanvasLayer" parent="."]
script = ExtResource("4")

[node name="HUD" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="HudFrame" type="TextureRect" parent="UI/HUD"]
visible = false
layout_mode = 0
offset_left = 8.0
offset_top = 8.0
offset_right = 264.0
offset_bottom = 136.0
mouse_filter = 2
texture = ExtResource("6")

[node name="GoldIcon" type="TextureRect" parent="UI/HUD"]
visible = false
layout_mode = 0
offset_left = 20.0
offset_top = 22.0
offset_right = 52.0
offset_bottom = 54.0
mouse_filter = 2
texture = ExtResource("9")

[node name="XPBar" type="TextureProgressBar" parent="UI/HUD"]
layout_mode = 0
offset_left = 16.0
offset_top = 44.0
offset_right = 276.0
offset_bottom = 54.0
mouse_filter = 2
texture_under = ExtResource("8")
texture_progress = ExtResource("7")

[node name="HealthBar" type="TextureProgressBar" parent="UI/HUD"]
layout_mode = 0
offset_left = 16.0
offset_top = 12.0
offset_right = 272.0
offset_bottom = 36.0
mouse_filter = 2
texture_under = ExtResource("22")
texture_progress = ExtResource("21")

[node name="Resources" type="Label" parent="UI/HUD"]
layout_mode = 0
offset_left = 16.0
offset_top = 64.0
offset_right = 16.0
offset_bottom = 64.0
theme_override_font_sizes/font_size = 12
text = "Resources: 0"

[node name="Time" type="Label" parent="UI/HUD"]
layout_mode = 0
offset_left = 16.0
offset_top = 80.0
offset_right = 16.0
offset_bottom = 80.0
theme_override_font_sizes/font_size = 12
text = "Time: 0.0"

[node name="Selection" type="Label" parent="UI/HUD"]
layout_mode = 0
offset_left = 16.0
offset_top = 116.0
offset_right = 16.0
offset_bottom = 116.0
theme_override_font_sizes/font_size = 12

[node name="Controls" type="Label" parent="UI/HUD"]
layout_mode = 0
offset_left = 16.0
offset_top = 132.0
offset_right = 16.0
offset_bottom = 132.0
theme_override_font_sizes/font_size = 12

[node name="Level" type="Label" parent="UI/HUD"]
layout_mode = 0
offset_left = 16.0
offset_top = 96.0
offset_right = 16.0
offset_bottom = 96.0
theme_override_font_sizes/font_size = 12
text = "Level: 1"

[node name="TechPanel" type="TextureRect" parent="UI/HUD"]
visible = false
layout_mode = 0
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -192.0
offset_top = -96.0
offset_right = 192.0
offset_bottom = 96.0
mouse_filter = 2
texture = ExtResource("13")

[node name="Title" type="Label" parent="UI/HUD/TechPanel"]
layout_mode = 0
offset_left = 16.0
offset_top = 12.0
offset_right = 16.0
offset_bottom = 12.0
theme_override_font_sizes/font_size = 12
text = "Tech Pick - Choose 1"

[node name="Option1" type="Label" parent="UI/HUD/TechPanel"]
layout_mode = 0
offset_left = 52.0
offset_top = 52.0
offset_right = 52.0
offset_bottom = 52.0
theme_override_font_sizes/font_size = 12
text = "1) "

[node name="Option1Icon" type="TextureRect" parent="UI/HUD/TechPanel"]
layout_mode = 0
offset_left = 20.0
offset_top = 48.0
offset_right = 44.0
offset_bottom = 72.0
mouse_filter = 2

[node name="Option2" type="Label" parent="UI/HUD/TechPanel"]
layout_mode = 0
offset_left = 52.0
offset_top = 86.0
offset_right = 52.0
offset_bottom = 86.0
theme_override_font_sizes/font_size = 12
text = "2) "

[node name="Option2Icon" type="TextureRect" parent="UI/HUD/TechPanel"]
layout_mode = 0
offset_left = 20.0
offset_top = 82.0
offset_right = 44.0
offset_bottom = 106.0
mouse_filter = 2

[node name="Option3" type="Label" parent="UI/HUD/TechPanel"]
layout_mode = 0
offset_left = 52.0
offset_top = 120.0
offset_right = 52.0
offset_bottom = 120.0
theme_override_font_sizes/font_size = 12
text = "3) "

[node name="Option3Icon" type="TextureRect" parent="UI/HUD/TechPanel"]
layout_mode = 0
offset_left = 20.0
offset_top = 116.0
offset_right = 44.0
offset_bottom = 140.0
mouse_filter = 2

[node name="Hint" type="Label" parent="UI/HUD/TechPanel"]
layout_mode = 0
offset_left = 20.0
offset_top = 152.0
offset_right = 20.0
offset_bottom = 152.0
theme_override_font_sizes/font_size = 12
text = "Press 1, 2, or 3"

[node name="StartPanel" type="TextureRect" parent="UI/HUD"]
visible = false
layout_mode = 0
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -192.0
offset_top = -112.0
offset_right = 192.0
offset_bottom = 112.0
mouse_filter = 2
texture = ExtResource("14")

[node name="StartTitle" type="Label" parent="UI/HUD/StartPanel"]
layout_mode = 0
offset_left = 20.0
offset_top = 20.0
offset_right = 20.0
offset_bottom = 20.0
theme_override_font_sizes/font_size = 16
text = "Stronghold Survivors"

[node name="StartBody" type="Label" parent="UI/HUD/StartPanel"]
layout_mode = 0
offset_left = 20.0
offset_top = 48.0
offset_right = 20.0
offset_bottom = 48.0
theme_override_font_sizes/font_size = 12
text = "Press Enter to start\\n1-9: build | Q/E/R/T: Barracks/Armory/Tech/Shrine\\nClick to place, U to upgrade, G to toggle gate"

[node name="Option1Icon" type="TextureRect" parent="UI/HUD/StartPanel"]
layout_mode = 0
offset_left = 24.0
offset_top = 88.0
offset_right = 56.0
offset_bottom = 120.0
mouse_filter = 2

[node name="Option1" type="Label" parent="UI/HUD/StartPanel"]
layout_mode = 0
offset_left = 64.0
offset_top = 92.0
offset_right = 64.0
offset_bottom = 92.0
theme_override_font_sizes/font_size = 12
text = "> 1) Hunter"

[node name="Option2Icon" type="TextureRect" parent="UI/HUD/StartPanel"]
layout_mode = 0
offset_left = 24.0
offset_top = 124.0
offset_right = 56.0
offset_bottom = 156.0
mouse_filter = 2

[node name="Option2" type="Label" parent="UI/HUD/StartPanel"]
layout_mode = 0
offset_left = 64.0
offset_top = 128.0
offset_right = 64.0
offset_bottom = 128.0
theme_override_font_sizes/font_size = 12
text = "  2) Pyromancer"

[node name="StartHint" type="Label" parent="UI/HUD"]
layout_mode = 0
offset_left = 16.0
offset_top = 16.0
offset_right = 16.0
offset_bottom = 16.0
theme_override_font_sizes/font_size = 14
text = "Press Enter to start"
